cmake_minimum_required(VERSION 3.12)
project(mFiCustomCode)

option(MFI_CROSS_COMPILE "Cross Compile for MIPS" OFF)

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

if(MFI_CROSS_COMPILE)
	execute_process(
		COMMAND make O=${CMAKE_CURRENT_SOURCE_DIR}/br2
		WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/buildroot
	)
	set(CMAKE_TOOLCHAIN_FILE ${CMAKE_CURRENT_SOURCE_DIR}/br2/host/share/buildroot/toolchainfile.cmake)
endif()

add_executable(Hello ${CMAKE_CURRENT_SOURCE_DIR}/hello.cpp)
set_target_properties(Hello PROPERTIES
	CXX_STANDARD 20
	CXX_EXTENSIONS OFF
	MAP_IMPORTED_CONFIG_MINSIZEREL Release
	MAP_IMPORTED_CONFIG_RELWITHDEBINFO Release
	VERSION 1.0.0.0
)